# Environment Variables
# This file contains the environment variables needed for the 3D Printer Stream Dashboard.
# Works for both Docker and local development deployments.

# =============================================================================
# DEPLOYMENT TYPE
# =============================================================================
# Choose one deployment method and follow the corresponding setup below:
# - Docker Deployment: Copy to .env (recommended for production)
# - Local Development: Copy to .env.local (for development)

# =============================================================================
# PRINTER CONFIGURATION (Required)
# =============================================================================

# Klipper/Moonraker host (printer IP address)
# For Docker: Use your printer's IP address (not localhost)
# For Local: Use localhost if printer is on same machine, or IP address
PRINTER_HOST=192.168.1.186

# Moonraker port (default: 7127)
MOONRAKER_PORT=7127

# Application URL
# For Docker: http://localhost:3000 (or your domain for production)
# For Local: http://localhost:3000
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# DATABASE CONFIGURATION (Optional - Guestbook Feature)
# =============================================================================

# Choose ONE of the following based on your deployment:

# --- OPTION 1: Docker Deployment (Recommended) ---
# Uses PostgreSQL container managed by docker-compose
# Uncomment these for Docker deployment:
POSTGRES_USER=guestbook
POSTGRES_PASSWORD=changeme_secure_password
POSTGRES_DB=guestbook

# Docker uses container hostname 'postgres'
# This is automatically set by docker-compose, but you can override:
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# --- OPTION 2: Local Development with External PostgreSQL ---
# Uses your own PostgreSQL server
# Uncomment and configure this for local development:
# DATABASE_URL=postgresql://username:password@localhost:5432/guestbook

# --- OPTION 3: No Database (Optional Features Disabled) ---
# Leave DATABASE_URL commented out to disable guestbook features
# App will work in public viewing mode without database

# Database connection settings
DATABASE_TIMEOUT=2000
DATABASE_POOL_SIZE=20

# =============================================================================
# ANALYTICS (Optional)
# =============================================================================

# Umami Analytics configuration
UMAMI_WEBSITE_ID=
UMAMI_HOST_URL=

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Environment (production, development, test)
# For Docker: production
# For Local: development
NODE_ENV=production

# Next.js specific settings (optional)
NEXT_PUBLIC_VERCEL_URL=

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================

# Docker Deployment:
# 1. Copy this file to .env:
#    cp .env.example .env
# 2. Update PRINTER_HOST with your printer's IP address
# 3. Set a secure POSTGRES_PASSWORD
# 4. Deploy:
#    make docker-up
#    (or: docker-compose up -d)

# Local Development:
# 1. Copy this file to .env.local:
#    cp .env.example .env.local
# 2. Update PRINTER_HOST (use localhost or IP)
# 3. Configure DATABASE_URL for your PostgreSQL (or leave empty)
# 4. Set NODE_ENV=development
# 5. Start dev server:
#    pnpm dev

# Database Management
# Use the SQL runner script for database management:
#   node scripts/sql-runner.js                 # Interactive SQL console
#   echo '.init' | node scripts/sql-runner.js # Initialize database tables
#   echo '.sample' | node scripts/sql-runner.js # Add sample data
#   echo '.recent' | node scripts/sql-runner.js # View recent entries

# Fallback Behavior
# When environment variables are not set:
# - PRINTER_HOST: Defaults to 192.168.1.186
# - MOONRAKER_PORT: Defaults to 7127
# - DATABASE_URL: If not set, database features (guestbook, settings) will be disabled
# - App will default to public viewing mode when database is unavailable

# Security Notes
# - Never commit .env.local or any file containing real credentials to version control
# - The DATABASE_URL contains sensitive connection information
# - Use environment-specific values for different deployments
# - Database features gracefully degrade when connection is unavailable